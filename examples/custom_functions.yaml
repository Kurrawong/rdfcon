prefixes:
  - sdo: <https://schema.org/>
  - xsd: <http://www.w3.org/2001/XMLSchema#>

infile: data.csv

# the templateFunctions field is an optional python file from which
# any defined functions can be made available for use in the
# template string.
templateFunctions: functions.py

# The template string is a jinja2 template, where all the utilities of
# a jinja2 template can be used.
# This means that 
#
# Two variables are available in the template by default
# row: the current row as a list
# headers: the column headers as a list
#
# There is the special case of column headings which will be converted
# from {id} --> {{ row[headers.index("id")] }} automatically
#
# any functions defined in the given {templateFunctions} file will also be made
# available in the template
template: |-
  {% if int(row[0]) != 2 %}
    <https://example.org/pid/{{ uuid() }}> a sdo:CreativeWork ;
    sdo:identifier "{id}"^^xsd:token ;
    sdo:genre "{{ get_genre(row[headers.index("category")]) }}" ;
    sdo:comment "converted on {{ get_current_date() }} with commit {{ get_short_commit_hash() }}" ;
    .
  {% endif %}
