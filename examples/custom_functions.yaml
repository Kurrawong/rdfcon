prefixes:
  sdo: <https://schema.org/>
  xsd: <http://www.w3.org/2001/XMLSchema#>

infile: data.csv

# the templateFunctions field is an optional python file from which
# any defined functions can be made available for use in the
# template string.
templateFunctions: functions.py

# The template string is a jinja2 template, where all the utilities of
# a jinja2 template can be used.
#
# three variables are available in the template by default
# r: the current row as a dictionary (with the column headers as keys)
# row: the current row as a list
# headers: the header row as a list
#
# There is a special case outside the jinja syntax, where
# {id} will be converted to  {{ r["id"] }} automatically for convenience.
#
# any functions defined in the given {templateFunctions} file will also be made
# available in the template
template: |-
  {% if int(row[0]) != 2 %}
    <https://example.org/pid/{{ uuid() }}> a sdo:CreativeWork ;
    sdo:identifier "{id}"^^xsd:token ;
    sdo:genre "{{ get_genre(r["category"]) }}" ;
    sdo:comment "converted on {{ get_current_date() }} with commit {{ get_short_commit_hash() }}" ;
    .
  {% endif %}
